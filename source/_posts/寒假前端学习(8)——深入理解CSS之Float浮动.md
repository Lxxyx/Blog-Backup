title: 寒假前端学习(8)——理解CSS浮动之父元素高度塌陷
date: 2016-02-06 12:49:01
tags: 前端
---
## 起因：
CSS的浮动，算是我在写网页时用的最多的属性之一。但要说我对浮动的了解程度的话，只能说“知其然而不知其所以然”。虽然很多人都说浮动会用就行，但是要想成为一个优秀的前端，对这些常用属性得知根知底。

恰巧在慕课网，张鑫旭老师开了《CSS深入理解之float浮动》这门课。所以这篇博客，也算是自己的听课笔记。
> [《CSS深入理解之float浮动》--张鑫旭](http://www.imooc.com/view/121)

## Float的历史
Float设计的初衷，是为了实现文字环绕效果。就像下图展示的一样（图片源于w3school）：
![Float效果图](http://7xoxxe.com1.z0.glb.clouddn.com/float1.png)
嗯，就这么简单。
## Float引起的父元素高度塌陷BUG？
在这儿，我们用一个例子来说明子元素设置浮动，从而引起父元素高度塌陷的问题。
首先写一个div，里面插入一张图片。
```html
<div id="div">
  <img src="./source/head.jpg">
</div>
```
我们再给div设置一个border，为了让大家看的清楚。
CSS设置如下：
```css
#div {
  border: 5px solid red;
  width: 600px;
}
```
最后效果是这样的:
![未Float的效果图](http://7xoxxe.com1.z0.glb.clouddn.com/float2.png)
通过chrome控制台，可以看到此时div的高度为464px。
![div高度](http://7xoxxe.com1.z0.glb.clouddn.com/float3.png)

接下来，我们给那张图片添加浮动效果。
```css
#div img{
  float: left;
}
```
再看网页，发现父元素已经塌陷了,之前的边框也消失不见了，成为一条线了。
![Float后的效果图](http://7xoxxe.com1.z0.glb.clouddn.com/float4.png)
此时再去控制台查看div的高度，高度为0px。
![div高度](http://7xoxxe.com1.z0.glb.clouddn.com/float5.png)
### 不，不是BUG
很多人把这个现象称为浮动带来的BUG。但从一开始Float的用途来思考：
```
“Float设计的初衷，是为了实现文字环绕效果。”
```
那么，在那远古蛮荒的互联网时代，要如何实现文字环绕图片的效果呢？机智的程序员加入了Float属性，也引入了子元素浮动，父元素高度塌陷的特性。
看到这句话的时候，我思考了很久。因为无法理解父元素高度塌陷为何能让文字环绕图片。于是把视频来来回回看了十多遍，又手写了个demo，总算理解了。

总结来说，核心要点在于一句话：
```
“浮动元素会脱离文档流。”
```
至于文档流是啥，我这儿就不介绍了。但浮动的元素脱离了文档流，所以是不计算高度的。
在此，我们加入一段话，看看div的高度。
![段落高度](http://7xoxxe.com1.z0.glb.clouddn.com/float6.png)
从图中可以看出，div因为段落的加入，高度被撑开了。

所以子元素浮动引起父元素高度塌陷的原因如下：
因为没有预先设置div高度，所以div高度由其包含的子元素高度决定。而浮动脱离文档流，所以图片并不会被计算高度。此时的div中，相当于div中子元素高度为0，所以发生了父元素高度塌陷现象。

### 文字环绕效果的实现
那么，文字环绕效果是如何实现的？
其实讲起来也很简单，因为父元素高度塌陷，所以文字会按正常顺序排列，无视图片高度。而图片宽带又还在，所以实现了文字环绕效果。
## 清除浮动
介绍完浮动，自然要介绍清除浮动。
在此，我们不具体的去探讨各种清除浮动的方式。
